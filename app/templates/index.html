<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <script src="static/plotly_min.js"></script>
        <script src="static/d3.min.js"></script>
    </head>
    <body>
    <div class="wrapper">
        <div id="chart"></div>
        <script>
            Plotly.d3.csv('static/data_x.csv', function(err,rows) {
                var data_x = [];
                for (let i = 0; i < rows.length; i++) {
                    data_x.push(rows.map(row => row [i]));
                }
                Plotly.d3.csv('static/data_y.csv', function (err, rows) {
                    var data_y = [];
                    for (let i = 0; i < rows.length; i++) {
                        data_y.push(rows.map(row => row [i]));
                    }
                    Plotly.d3.csv('static/data_z.csv', function (err, rows) {
                        var data_z = [];
                        for (let i = 0; i < rows.length; i++) {
                            data_z.push(rows.map(row => row [i]));
                        }
                        Plotly.d3.csv('static/data_path.csv', function (err, rows) {
                            let x_path = [];
                            let y_path = [];
                            let z_path = [];

                            console.log(rows.length);
                            for (let i = 0; i < 400; i++){
                                x_path.push(rows[0][i]);
                                y_path.push(rows[1][i]);
                                z_path.push(rows[2][i]);
                            }

                            let colorscale = [[0.0, "#000000"], [1.0, "#ffffff"]]

                            let data = [{
                                x: data_x,
                                y: data_y,
                                z: data_z,
                                type: 'surface',
                                colorscale: "Bluered",
                            },
                                {
                                    x: x_path,
                                    y: y_path,
                                    z: z_path,
                                    type: "scatter3d",
                                    mode: "lines",
                                    line: {
                                        width: 8,
                                        reversescale: false,
                                    }
                                }];

                            let layout = {
                                title: 'Landscape',
                                autosize: false,
                                width: 2000,
                                height: 600,
                                margin: {
                                    l: 300,
                                    r: 300,
                                    b: 0,
                                    t: 100,
                                },
                                scene: {
                                    xaxis: {
                                        showbackground: false,
                                        nticks: 9,
                                        range: [0, Math.max(...data_x[0])],
                                    },
                                    yaxis: {
                                        nticks: 7,
                                        range: [0, Math.max(...data_x[0])],
                                    },
                                    zaxis: {
                                        nticks: 10,
                                        range: [-1 / 3 * Math.max(...data_x[0]), 2 / 3 * Math.max(...data_x[0])],
                                    }
                                }
                            };

                            Plotly.plot('chart', data, layout);
                        })
                    })
                })
            })

            Plotly.plot("chart", [{z: data, type: "surface", surfacecolor: color, colorscale: colorscale}])
        </script>
    </div>
    </body>
</html>